var f={compMap:{"":{}},classNameCache:{}};var w,g=()=>{if(w)return w;let e=navigator.userAgent.toLocaleLowerCase(),i=/(?:android)/.test(e),o=/(?:firefox)/.test(e),c=/(?:chrome|crios)/.test(e),r=/(safari)/.test(e),s=/(?:ipad|playbook)/.test(e)||i&&!/(?:mobile)/.test(e)||o&&/(?:tablet)/.test(e),l=/(?:iphone)/.test(e)&&!s,t=!l&&!i,a=!t,n=a&&/(micromessenger|wechat)/.test(e);return w={android:i,firefox:o,chrome:c,tablet:s,ios:l,wechat:n,pc:t,phone:a,safari:r},w};var $={hover:":hover",focus:":focus",active:":active",first:":first-child",last:":last-child",blank:":blank",checked:":checked",current:":current",disabled:":disabled","focus-within":":focus-within","focus-visible":":focus-visible","in-range":":in-range",visited:":visited",even:":nth-child(even)",odd:":nth-child(odd)","placeholder-shown":":placeholder-shown",after:"::after",before:"::before",placeholder:"::-webkit-input-placeholder",scrollbar:"::-webkit-scrollbar","scrollbar-thumb":"::-webkit-scrollbar-thumb","scrollbar-track":"::-webkit-scrollbar-track","scrollbar-button":"::-webkit-scrollbar-button","scrollbar-corner":"::-webkit-scrollbar-corner"},N={dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"},k={};function h(e,i){let o=e+"_$$_"+i,c=k[o];if(c)return c;let r={comp:void 0,compName:"",pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!i)return k[o]=r,r;let s=f.compMap[e];return i.split(":").forEach((t,a)=>{if(a===0){if(N[t]){r.media=N[t],r.mediaName=t;return}else if(g()[t]!==void 0){r.media=`@media screen and (min-width: ${g()[t]?"0px":"9999px"})`,r.mediaName=t;return}}a<2&&$[t]?(r.pesudo=$[t],r.pesudoName=t):!r.comp&&!r.name&&s&&s[t]?(r.comp=s[t],r.compName=t):!r.comp&&!r.name?r.name=t:r.value?r.query||(r.query=t):(r.comp&&(t=t.replace(/\((.*?)\)/g,n=>n.replace(/\,/g,"^^^"))),r.value=t)}),k[o]=r,r}var q=({css:e,name:i="",media:o="",mediaName:c="",pesudo:r="",group:s=""})=>{if(!e)return;let l=`^sty_${e}_${i}_${o}_${r}_${s}`;if(f.classNameCache[l])return;f.classNameCache[l]=!0;let t=h(s,e),a=t.value;if(!a)return;t.media&&(o=t.media),t.mediaName&&(c=t.mediaName),t.pesudo&&(r=t.pesudo);let n=a.split("~");n.length>1&&(a=" "+n.map(d=>`"${d}"`).join(" "),a+=";"),a=a.replace(/calc\((.*?)\)/g,d=>(d=d.replace(/(-|\+|\*|\/)/g,I=>" "+I+" "),d)),a=a.replace(/\|/g," "),a=a.replace(/var\((.*?)\)/g,d=>d.replace(/(var\(|\))/g,"")),a=a.replace(/--([a-zA-Z0-9_-]*)/g,d=>`var(${d})`),a=a.replace(/\^\^\^/g,",");let u=(i||e).replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,d=>"\\"+d),m=s?`.\\[${s}\\]`:"",p=document.createElement("style"),y=t.name.replace("*","--");if(o?p.textContent=`${o} {.${u}${m}${r} ${t.query}{${y}:${a}}}`:p.textContent=`.${u}${m}${r} ${t.query}{${y}:${a}}`,p.setAttribute("flavor-css",""),document.head.append(p),c){let d=document.createElement("style");d.textContent=`.media-${c} .${u}${m}${r} ${t.query}{${y}:${a}}`,d.setAttribute("flavor-css",""),document.head.append(d)}};var M={},v=e=>{let i=M[e];if(i)return i;let o=[];e=e.replace(/\n/g," ");let c=[],r=e.match(/\[(.*?)\]/g),s={};r&&r.forEach(a=>{if(a){let n=a.replace(/(\[|\])/g,"");c.push(n),s[n]=!0}});let l=/\[(.*?)\]/g,t=e.split(l);return t.forEach((a,n)=>{if(a=a.trim(),!a)return;let u=t[n+1];n===0&&!s[a]&&o.push({cssItem:a,group:""}),s[a]&&u&&!s[u]&&o.push({cssItem:u.trim(),group:a})}),M[e]=o,o};var x=(e,i="",o="",c="",r="",s="")=>{let l=`^parser_${e}_${i}_${o}_${c}_${r}`;return f.classNameCache[l]||(f.classNameCache[l]=!0,v(e).forEach(({cssItem:t,group:a})=>{t.split(" ").filter(Boolean).forEach(n=>{let u=a,m=h(a,n);if(m.comp||(m=h("",n),u=""),m.comp){let p=m.comp(m.value.split(","));x(p,n,m.media,m.mediaName,m.pesudo,u)}else q({css:n,name:i,media:o,mediaName:c,pesudo:r,group:s})})})),e};var L={},E=(e,i,o)=>{let c=`^group_${e}_${i}_${o}`;L[c]||(L[c]=!0,f.compMap[e]||(f.compMap[e]={}),f.compMap[e][i]=r=>{let s=o;r.forEach((n,u)=>{s=s.replace(new RegExp(`(\\$${u+1})`,"g"),n)});let l=r[r.length],t=n=>{s.indexOf("$"+n)>-1&&(s=s.replace(new RegExp(`(\\$${n+1})`,"g"),l),t(n+1))};t(o.length+1);let a="";return v(s).forEach(({cssItem:n,group:u})=>{n.split(" ").forEach(m=>{let p=h(u,m);p.comp||(p=h(e,m),!p.comp&&e!==""&&u!==""&&(p=h("",m))),p.comp?p.comp(p.value.split(",")).split(" ").forEach(d=>{a+=[p.mediaName,p.pesudoName,d,p.query].filter(Boolean).join(":")+" "}):a+=m+" "})}),a})};var A="[class]",S=()=>{document.head.querySelectorAll("style[flavor-css]").forEach(e=>{e.remove()}),f.compMap={},f.classNameCache={},document.querySelectorAll("[flavor]").forEach(_),document.body.querySelectorAll(A).forEach(b)};function _(e){let i=e.getAttribute("flavor");if(i==null)return;let o="";if(e.tagName==="TEMPLATE"){let c=e.content.cloneNode(!0);c&&(o=c.textContent)}else o=e.textContent;o&&(o=o.replace(`
`,""),o.trim().split(";").forEach(c=>{let[r,...s]=c.split(":");r=r.trim(),r&&E(i,r,s.join(":").trim())}))}function b(e){!e||e.className&&typeof e.className=="string"&&x(e.className)}var O=()=>{let e=(o,...c)=>{let r=o.length;for(let s=0;s<r;s++){let l=o[s];if(l.type==="childList"){let t=l.target;if(t.__flavorIgnore&&t.closest("[flavor-ignore]")&&!t.getAttribute("flavor-ignore")){t.__flavorIgnore=!0;return}_(t),b(t),l.addedNodes.length&&(t.querySelectorAll("[flavor]").forEach(_),t.querySelectorAll(A).forEach(b))}else l.type==="attributes"&&b(l.target)}};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],characterData:!1,attributeOldValue:!1,characterDataOldValue:!1})},G=!1,C=()=>{if(!(typeof window=="undefined"||typeof document=="undefined"||!window.location)&&!G){if(!window.MutationObserver){console.error("[flavorcss] Your Browser not supported MutationObserver");return}if(!document.body){requestAnimationFrame(C);return}document.querySelectorAll("[flavor]").forEach(_),document.body.querySelectorAll(A).forEach(e=>{b(e)}),O(),G=!0}};C();var T={device:g,parser:x,observeClass:C,classGroup:E,mediaList:N,pesudoList:$,cache:f,reset:S};window.flavorcss=T;export{T as flavorcss};
