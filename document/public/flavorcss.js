!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((e=e||self).flavorcss={})}(this,function(e){"use strict";function n(){if(l)return l;var e=navigator.userAgent.toLocaleLowerCase(),a=/(?:android)/.test(e),r=/(?:firefox)/.test(e),t=/(?:chrome|crios)/.test(e),o=/(safari)/.test(e),i=/(?:ipad|playbook)/.test(e)||a&&!/(?:mobile)/.test(e)||r&&/(?:tablet)/.test(e),n=/(?:iphone)/.test(e)&&!i,c=!n&&!a,s=!c,d=s&&/(micromessenger|wechat)/.test(e);return l={android:a,firefox:r,chrome:t,tablet:i,ios:n,wechat:d,pc:c,phone:s,safari:o}}var l,c={hover:":hover",focus:":focus",active:":active",first:":first-child",last:":last-child",blank:":blank",checked:":checked",current:":current",disabled:":disabled","focus-within":":focus-within","focus-visible":":focus-visible","in-range":":in-range",visited:":visited",even:":nth-child(even)",odd:":nth-child(odd)","placeholder-shown":":placeholder-shown",after:"::after",before:"::before",placeholder:"::-webkit-input-placeholder",scrollbar:"::-webkit-scrollbar","scrollbar-thumb":"::-webkit-scrollbar-thumb","scrollbar-track":"::-webkit-scrollbar-track","scrollbar-button":"::-webkit-scrollbar-button","scrollbar-corner":"::-webkit-scrollbar-corner"},s={dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"},d={};function y(e,a){var r=e+"_$$_"+a,t=d[r];if(t)return t;var o={comp:void 0,compName:"",pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!a)return d[r]=o;var i=N.compMap[e];return a.split(":").forEach(function(e,a){if(0===a){if(s[e])return o.media=s[e],void(o.mediaName=e);if(void 0!==n()[e])return o.media="@media screen and (min-width: "+(n()[e]?"0px":"9999px")+")",void(o.mediaName=e)}a<2&&c[e]?(o.pesudo=c[e],o.pesudoName=e):!o.comp&&!o.name&&i&&i[e]?(o.comp=i[e],o.compName=e):o.comp||o.name?o.value?o.query||(o.query=e):(o.comp&&(e=e.replace(/\((.*?)\)/g,function(e){return e.replace(/\,/g,"^^^")})),o.value=e):o.name=e}),d[r]=o}function m(e){var a=u[e];if(a)return a;var t=[],r=(e=e.replace(/\n/g," ")).match(/\[(.*?)\]/g),o={};r&&r.forEach(function(e){if(e){var a=e.replace(/(\[|\])/g,"");o[a]=!0}});var i=e.split(/\[(.*?)\]/g);return i.forEach(function(e,a){if(e=e.trim()){var r=i[a+1];0!==a||o[e]||t.push({cssItem:e,group:""}),o[e]&&r&&!o[r]&&t.push({cssItem:r.trim(),group:e})}}),u[e]=t}var u={},r={},i=function(i,e,n){var a="^group_"+i+"_"+e+"_"+n;r[a]||(r[a]=!0,N.compMap[i]||(N.compMap[i]={}),N.compMap[i][e]=function(e){var r=n;e.forEach(function(e,a){r=r.replace(new RegExp("(\\$"+(a+1)+")","g"),e)});var a=e[e.length],t=function(e){-1<r.indexOf("$"+e)&&(r=r.replace(new RegExp("(\\$"+(e+1)+")","g"),a),t(e+1))};t(n.length+1);var o="";return m(r).forEach(function(e){var a=e.cssItem,r=e.group;a.split(" ").forEach(function(e){var a=y(r,e);(a.comp||(a=y(i,e)).comp||""===i||""===r||(a=y("",e)),a.comp)?a.comp(a.value.split(",")).split(" ").forEach(function(e){o+=[a.mediaName,a.pesudoName,e,a.query].filter(Boolean).join(":")+" "}):o+=e+" "})}),o})};function o(e){var o=e.getAttribute("flavor");if(null!=o){var a="";if("TEMPLATE"===e.tagName){var r=e.content.cloneNode(!0);r&&(a=r.textContent)}else a=e.textContent;a&&(a=a.replace("\n","")).trim().split(";").forEach(function(e){var a=e.split(":"),r=a[0],t=a.slice(1);(r=r.trim())&&i(o,r,t.join(":").trim())})}}function p(e){e&&e.className&&"string"==typeof e.className&&f(e.className)}var a=!1,t=function(){"undefined"!=typeof window&&"undefined"!=typeof document&&window.location&&(a||(window.MutationObserver?document.body?(document.querySelectorAll("[flavor]").forEach(o),document.body.querySelectorAll("[class]").forEach(p),new MutationObserver(function(e){for(var a=0,r=e;a<r.length;a++){var t=r[a];"childList"===t.type?(o(t.target),p(t.target),t.target.querySelectorAll("[flavor]").forEach(o),t.target.querySelectorAll("[class]").forEach(p)):"attributes"===t.type&&p(t.target)}}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),a=!0):requestAnimationFrame(t):console.error("[flavorcss] Your Browser not supported MutationObserver")))};t();var N={compMap:{"":{}},classNameCache:{}},f=function(e,i,n,c,s,d){void 0===i&&(i=""),void 0===n&&(n=""),void 0===c&&(c=""),void 0===s&&(s=""),void 0===d&&(d="");var a="^parser_"+e+"_"+i+"_"+n+"_"+c+"_"+s;return N.classNameCache[a]||(N.classNameCache[a]=!0,m(e).forEach(function(e){var a=e.cssItem,o=e.group;a.split(" ").filter(Boolean).forEach(function(e){var a=o,r=y(o,e);if(r.comp||(r=y("",e),a=""),r.comp){var t=r.comp(r.value.split(","));f(t,e,r.media,r.mediaName,r.pesudo,a)}else!function(e){var a=e.css,r=e.name,t=void 0===r?"":r,o=e.media,i=void 0===o?"":o,n=e.mediaName,c=void 0===n?"":n,s=e.pesudo,d=void 0===s?"":s,l=e.group,m=void 0===l?"":l;if(a){var u="^sty_"+a+"_"+t+"_"+i+"_"+d+"_"+m;if(!N.classNameCache[u]){N.classNameCache[u]=!0;var p=y(m,a),f=p.value;if(f){p.media&&(i=p.media),p.mediaName&&(c=p.mediaName),p.pesudo&&(d=p.pesudo);var v=f.split("~");1<v.length&&(f=" "+v.map(function(e){return'"'+e+'"'}).join(" "),f+=";"),f=(f=(f=(f=(f=f.replace(/calc\((.*?)\)/g,function(e){return e=e.replace(/(-|\+|\*|\/)/g,function(e){return" "+e+" "})})).replace(/\|/g," ")).replace(/var\((.*?)\)/g,function(e){return e.replace(/(var\(|\))/g,"")})).replace(/--([a-zA-Z0-9_-]*)/g,function(e){return"var("+e+")"})).replace(/\^\^\^/g,",");var h=(t||a).replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,function(e){return"\\"+e}),b=m?".\\["+m+"\\]":"",x=document.createElement("style"),g=p.name.replace("*","--");if(x.textContent=i?i+" {."+h+b+d+" "+p.query+"{"+g+":"+f+"}}":"."+h+b+d+" "+p.query+"{"+g+":"+f+"}",x.setAttribute("flavor-css",""),document.head.append(x),c){var w=document.createElement("style");w.textContent=".media-"+c+" ."+h+b+d+" "+p.query+"{"+g+":"+f+"}",w.setAttribute("flavor-css",""),document.head.append(w)}}}}}({css:e,name:i,media:n,mediaName:c,pesudo:s,group:d})})})),e},v={device:n,parser:f,observeClass:t,classGroup:i,mediaList:s,pesudoList:c,reset:function(){document.head.querySelectorAll("style[flavor-css]").forEach(function(e){e.remove()}),N.compMap={},N.classNameCache={},document.querySelectorAll("[flavor]").forEach(o),document.body.querySelectorAll("[class]").forEach(p)}};window.flavorcss=v,e.flavorcss=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
