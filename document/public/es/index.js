var x={};var g={};var C,y=()=>{if(C)return C;let r=navigator.userAgent.toLocaleLowerCase(),i=/(?:android)/.test(r),s=/(?:firefox)/.test(r),o=/(?:chrome|crios)/.test(r),e=/(safari)/.test(r),n=/(?:ipad|playbook)/.test(r)||i&&!/(?:mobile)/.test(r)||s&&/(?:tablet)/.test(r),p=/(?:iphone)/.test(r)&&!n,t=!p&&!i,a=!t,c=a&&/(micromessenger|wechat)/.test(r);return C={android:i,firefox:s,chrome:o,tablet:n,ios:p,wechat:c,pc:t,phone:a,safari:e},C};var w={hover:":hover",focus:":focus",active:":active",first:":first-child",last:":last-child",blank:":blank",checked:":checked",current:":current",disabled:":disabled","focus-within":":focus-within","focus-visible":":focus-visible","in-range":":in-range",visited:":visited",even:":nth-child(even)",odd:":nth-child(odd)","placeholder-shown":":placeholder-shown",after:"::after",before:"::before",placeholder:"::-webkit-input-placeholder"},N={dark:"@media (prefers-color-scheme: dark)",def:"@media screen and (max-width: 479px)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","xs-max":"@media screen and (max-width: 479px)","sm-max":"@media screen and (max-width: 639px)","md-max":"@media screen and (max-width: 767px)","lg-max":"@media screen and (max-width: 1023px)","xl-max":"@media screen and (max-width: 1279px)","xxl-max":"@media screen and (max-width: 1535px)"},A={};function u(r,i){let s=r+"_$$_"+i,o=A[s];if(o)return o;let e={comp:void 0,compName:"",pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!i)return A[s]=e,e;let n=x[r];return i.split(":").forEach((t,a)=>{if(a===0){if(N[t]){e.media=N[t],e.mediaName=t;return}else if(y()[t]!==void 0){e.media=`@media screen and (min-width: ${y()[t]?"0px":"9999px"})`,e.mediaName=t;return}}a<2&&w[t]?(e.pesudo=w[t],e.pesudoName=t):!e.name&&n&&n[t]?(e.comp=n[t],e.compName=t):!e.comp&&!e.name?e.name=t:e.value?e.query||(e.query=t):(e.comp&&(t=t.replaceAll(/\((.*?)\)/g,c=>c.replace(/\,/g,"^^^"))),e.value=t)}),A[s]=e,e}var q=({css:r,name:i="",media:s="",mediaName:o="",pesudo:e="",group:n=""})=>{if(!r)return;let p=`^sty_${r}_${i}_${s}_${e}_${n}`;if(g[p])return;g[p]=!0;let t=u(n,r),a=t.value;if(!a)return;t.media&&(s=t.media),t.mediaName&&(o=t.mediaName),t.pesudo&&(e=t.pesudo);let c=a.split("~");c.length>1&&(a=" "+c.map(l=>`"${l}"`).join(" "),a+=";"),a=a.replaceAll(/calc\((.*?)\)/g,l=>(l=l.replaceAll(/(-|\+|\*|\/)/g,k=>" "+k+" "),l)),a=a.replace(/\|/g," "),a=a.replaceAll(/var\((.*?)\)/g,l=>l.replace(/(var\(|\))/g,"")),a=a.replaceAll(/--([a-zA-Z0-9_-]*)/g,l=>`var(${l})`),a=a.replace(/\^\^\^/g,",");let d=(i||r).replaceAll(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,l=>"\\"+l),f=n?`.\\[${n}\\]`:"",m=document.createElement("style"),h=t.name.replace("*","--");if(s?m.textContent=`${s} {.${d}${f}${e} ${t.query}{${h}:${a}}}`:m.textContent=`.${d}${f}${e} ${t.query}{${h}:${a}}`,document.head.append(m),o){let l=document.createElement("style");l.textContent=`.media-${o} .${d}${f}${e} ${t.query}{${h}:${a}}`,document.head.append(l)}};var E=r=>{let i=[];r=r.replace(/\n/g," ");let s=[],o=r.match(/\[(.*?)\]/g),e={};o&&o.forEach(t=>{if(t){let a=t.replace(/(\[|\])/g,"");s.push(a),e[a]=!0}});let n=/\[(.*?)\]/g,p=r.split(n);return p.forEach((t,a)=>{if(t=t.trim(),!t)return;let c=p[a+1];a===0&&!e[t]&&i.push({cssItem:t,group:""}),e[t]&&c&&!e[c]&&i.push({cssItem:c.trim(),group:t})}),i};var b=(r,i="",s="",o="",e="",n="")=>{let p=`^parser_${r}_${i}_${s}_${o}_${e}`;return g[p]||(g[p]=!0,E(r).forEach(({cssItem:t,group:a})=>{t.split(" ").filter(Boolean).forEach(c=>{let{comp:d,value:f,media:m,mediaName:h,pesudo:l}=u(a,c);if(d){let k=d(f.split(","));b(k,c,m,h,l,a)}else q({css:c,name:i,media:s,mediaName:o,pesudo:e,group:n})})})),r};var L={},G={},_=(r,i,s)=>{let o=`^group_${r}_${i}_${s}`;G[o]||(G[o]=!0,x[r]||(x[r]={}),x[r][i]=e=>{let n=s;e.forEach((c,d)=>{n=n.replace(new RegExp(`(\\$${d+1})`,"g"),c)});let p=e[e.length],t=c=>{n.indexOf("$"+c)>-1&&(n=n.replace(new RegExp(`(\\$${c+1})`,"g"),p),t(c+1))};t(s.length+1);let a="";return E(n).forEach(({cssItem:c,group:d})=>{c.split(" ").forEach(f=>{let m=u("",f);!m.comp&&d!==""&&(m=u(d,f),!m.comp&&d!==r&&(m=u(r,f))),m.comp?m.comp(m.value.split(",")).split(" ").forEach(l=>{a+=[m.mediaName,m.pesudoName,l,m.query].filter(Boolean).join(":")+" "}):a+=f+" "})}),a})};function M(r){let i=r.getAttribute("flavor")||"",s="";if(r.tagName==="TEMPLATE"){let o=r.content.cloneNode(!0);o&&(s=o.textContent)}else s=r.textContent;s&&(s=s.replace(`
`,""),s.trim().split(";").forEach(o=>{let[e,...n]=o.split(":");e=e.trim(),e&&_(i,e,n.join(":").trim())}))}function v(r){!r||r.className&&typeof r.className=="string"&&b(r.className)}var O=()=>{let r=s=>{for(let o of s)if(o.type==="childList")M(o.target),v(o.target),o.target.querySelectorAll("[flavor]").forEach(M),o.target.querySelectorAll("[class]").forEach(v);else if(o.type==="attributes"){let e=o.target;v(e)}};new MutationObserver(r).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})},S=!1,$=()=>{if(!(typeof window=="undefined"||typeof document=="undefined"||!window.location)&&!S){if(!window.MutationObserver){import("./MutationObserver.js").then(()=>{console.log(window.MutationObserver,"222"),$()}),console.error("[flavorcss] Your Browser not supported MutationObserver");return}if(!document.body){requestAnimationFrame($);return}document.querySelectorAll("[flavor]").forEach(M),document.body.querySelectorAll("[class]").forEach(v),O(),S=!0}};$();window.flavorcss={device:y,parser:b,observeClass:$,classGroup:_,groupList:L,mediaList:N,pesudoList:w};export{_ as classGroup,y as device,L as groupList,N as mediaList,$ as observeClass,b as parser,w as pesudoList};
