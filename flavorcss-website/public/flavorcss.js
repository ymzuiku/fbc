var T={"(":1,";":1,":":1,"=":1},p=({css:e,name:r="",media:n="",mediaName:s="",pesudo:a="",value:t=""})=>{if(!r||!t)return;let i=t[t.length-1];if(T[i])return;if(i==="!"&&(t=t.replace(/(!$)/," !important")),/\~/.test(t)){let C=t.split("~").map(b=>b?`"${b}"`:"").join(" ");t=" "+C,t+=";"}t=t.replace(/calc\((.*?)\)/g,c=>(c=c.replace(/(-|\+|\*|\/)/g,C=>" "+C+" "),c)),t=t.replace(/\|/g," "),t=t.replace(/var\((.*?)\)/g,c=>c.replace(/(var\(|\))/g,"")),t=t.replace(/--([a-zA-Z0-9_-]*)/g,c=>`var(${c})`),t=t.replace(/\^\^\^/g,",");let o=e.replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,c=>"\\"+c);/^(\w|\*)/.test(a)&&(a=" "+a),a=a.replace(/\|/g," ");let m=document.createElement("style");if(n?m.textContent=`${n} {.${o}${a}{${r}:${t}}}`:m.textContent=`.${o}${a}{${r}:${t}}`,console.log(m.textContent),m.setAttribute("flavor-css",""),document.head.append(m),s){let c=document.createElement("style");c.textContent=`.media-${s} .${o}${a}{${r}:${t}}`,c.setAttribute("flavor-css",""),document.head.append(c)}};var l=/(\n| )/;var f={},x=e=>{!e||(e=e.replace(`
`,""),e=e.replace(/(\/\/\s)/g,"//"),e.trim().split(";").forEach(r=>{let[n,...s]=r.split(":"),a=s.join(":");n=n.trim(),n&&a.split(l).filter(Boolean).forEach(i=>{q(n,i)})}))},_={},H=Array(10).fill(0).map((e,r)=>new RegExp(`(\\$${r+1})`,"g")),q=(e,r)=>{let n=`${e}___${r}`;_[n]||(_[n]=!0,f[e]||(f[e]=[]),f[e].push(s=>{let a=s.split(","),t=r;return a.forEach((i,o)=>{t=t.replace(H[o],i)}),t}))};var d=navigator.userAgent.toLocaleLowerCase(),N=/(?:android)/.test(d),A=/(?:firefox)/.test(d),R=/(?:chrome|crios)/.test(d),j=/(safari)/.test(d),L=/(?:ipad|playbook)/.test(d)||N&&!/(?:mobile)/.test(d)||A&&/(?:tablet)/.test(d),S=/(?:iphone)/.test(d)&&!L,k=!S&&!N,M=!k,B=M&&/(micromessenger|wechat)/.test(d),g={android:N,firefox:A,chrome:R,tablet:L,ios:S,wechat:B,desktop:k,phone:M,safari:j};var u={all:"",print:"@media print",speech:"@media speech",fine:"@media (pointer: fine)",dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"};function O(e,r){e.comp=f[r],e.compName=r}function V(e,r){u[r]?(e.media=u[r],e.mediaName=r):g[r]!==void 0&&(e.media=`@media screen and (min-width: ${g[r]?"0px":"9999px"})`,e.mediaName=r)}function D(e,r){!r||(e.comp&&(r=r.replace(/\((.*?)\)/g,n=>n.replace(/\,/g,"^^^"))),e.value=r)}function $(e,r){let n="_$$_"+e,s={css:r||e,compName:"",comp:void 0,pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!e||e[0]==="/"&&e[1]==="/")return s;let a=e.split(":");V(s,a[0]),s.mediaName&&a.shift();let t=a.length,i=a[t-1],o=t>=2?a[t-2]:"";t===1&&(o=i,i="");let m=[...a];return o?(s.name=o,O(s,o),D(s,i),m.pop(),m.pop()):(s.name=i,m.pop()),s.pesudo=m.join(":"),s.pesudoName=s.pesudo,console.log(e,s),s}var h={},y=e=>{let r="-"+e;return h[r]||(h[r]=!0,e.split(l).filter(Boolean).forEach(n=>{if(h[n])return;h[n]=!0;let s=$(n);s.comp?s.comp.forEach(a=>a(s.value).split(l).filter(Boolean).forEach(t=>{p({pesudo:s.pesudo,media:s.media,mediaName:s.mediaName,...$(t,n)})})):p(s)})),e};function E(e){if(!e.hasAttribute("flavor-css"))return;let r="";if(e.tagName==="TEMPLATE"){let n=e.content.cloneNode(!0);n&&(r=n.textContent)}else r=e.textContent;x(r)}function w(e){!e||e.className&&typeof e.className=="string"&&y(e.className)}var I=()=>{let e=(n,...s)=>{let a=n.length;for(let t=0;t<a;t++){let i=n[t];if(i.type==="childList"){let o=i.target;if(o.__flavorIgnore&&o.closest("[flavor-ignore]")&&!o.getAttribute("flavor-ignore")){o.__flavorIgnore=!0;return}w(o),E(o),i.addedNodes.length&&(o.querySelectorAll("[flavor-css]").forEach(E),o.querySelectorAll("[class]").forEach(w))}else i.type==="attributes"&&w(i.target)}};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],characterData:!1,attributeOldValue:!1,characterDataOldValue:!1})};window.addEventListener("load",()=>{document.querySelectorAll("[flavor-css]").forEach(E),document.querySelectorAll("[class]").forEach(w),I()});var F={addStyle:p,os:g,addCss:y,addComponents:x,mediaList:u};window.flavorcss=F;export{F as flavorcss};
