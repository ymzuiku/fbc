!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).flavorcss={})}(this,function(e){"use strict";function i(){if(l)return l;var e=navigator.userAgent.toLocaleLowerCase(),t=/(?:android)/.test(e),r=/(?:firefox)/.test(e),a=/(?:chrome|crios)/.test(e),o=/(safari)/.test(e),n=/(?:ipad|playbook)/.test(e)||t&&!/(?:mobile)/.test(e)||r&&/(?:tablet)/.test(e),i=/(?:iphone)/.test(e)&&!n,c=!i&&!t,s=!c,u=s&&/(micromessenger|wechat)/.test(e);return l={android:t,firefox:r,chrome:a,tablet:n,ios:i,wechat:u,pc:c,phone:s,safari:o}}var l,c={},b={},s={hover:":hover",focus:":focus",active:":active","first-child":":first-child","last-child":":last-child",blank:":blank",checked:":checked",current:":current",disabled:":disabled","focus-within":":focus-within","in-range":":in-range",visited:":visited",even:":nth-child(even)",odd:":nth-child(odd)","placeholder-shown":":placeholder-shown",after:"::after",before:"::before",placeholder:"::-webkit-input-placeholder"},u={xs:"480px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px",xxl:"1536px"},d={};function y(e,t){var r=e+"_$$_"+t,a=d[r];if(a)return a;var o={comp:void 0,compName:"",pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:"",queryName:""};if(!t)return d[r]=o;var n=c[e];return t.split(":").forEach(function(e,t){0===t&&("dark"===e?(o.media="@media (prefers-color-scheme: dark)",o.mediaName=e):u[e]?(o.media="@media screen and (min-width: "+u[e]+")",o.mediaName=e):void 0!==i()[e]&&(o.media="@media screen and (min-width: "+(i()[e]?"0px":"9999px")+")",o.mediaName=e)),s[e]?o.pesudo=s[e]:n&&n[e]?(o.comp=n[e],o.compName=e):o.comp||o.name?o.value?o.query||(o.query=e):(o.comp&&(e=e.replaceAll(/\((.*?)\)/g,function(e){return e.replace(/\,/g,"^^^")})),o.value=e):o.name=e}),d[r]=o}function a(e){var a=[],t=e.match(/\[(.*?)\]/g),o={};t&&t.forEach(function(e){if(e){var t=e.replace(/(\[|\])/g,"");o[t]=!0}});var n=e.split(/\[(.*?)\]/g);return n.forEach(function(e,t){if(e=e.trim()){var r=n[t+1];0!==t||o[e]||a.push({cssItem:e,group:""}),o[e]&&r&&!o[r]&&a.push({cssItem:r.trim(),group:e})}}),a}var f=function(e,s,u,l,d){void 0===s&&(s=""),void 0===u&&(u=""),void 0===l&&(l=""),void 0===d&&(d="");var t="^parser_"+e+"_"+s+"_"+u+"_"+l;return b[t]||(b[t]=!0,a(e).forEach(function(e){var t=e.cssItem,c=e.group;t.split(" ").filter(Boolean).forEach(function(e){var t=y(c,e),r=t.comp,a=t.value,o=t.media,n=t.pesudo;if(r){var i=r(a.split(","));f(i,e,o,n,c)}else!function(e){var t=e.css,r=e.name,a=void 0===r?"":r,o=e.media,n=void 0===o?"":o,i=e.pesudo,c=void 0===i?"":i,s=e.group,u=void 0===s?"":s;if(t){var l="^sty_"+t+"_"+a+"_"+n+"_"+c+"_"+u;if(!b[l]){b[l]=!0;var d=y(u,t),f=d.value;if(f){d.media&&(n=d.media),d.pesudo&&(c=d.pesudo);var p=f.split("~");1<p.length&&(f=" "+p.map(function(e){return'"'+e+'"'}).join(" "),f+=";"),f=(f=(f=(f=(f=f.replaceAll(/calc\((.*?)\)/g,function(e){return e=e.replaceAll(/(-|\+|\*|\/)/g,function(e){return" "+e+" "})})).replace(/\|/g," ")).replaceAll(/var\((.*?)\)/g,function(e){return e.replace(/(var\(|\))/g,"")})).replaceAll(/--([a-zA-Z0-9_-]*)/g,function(e){return"var("+e+")"})).replace(/\^\^\^/g,",");var m=(a||t).replaceAll(/(\:|#|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,function(e){return"\\"+e}),v=u?".\\["+u+"\\]":"",h=document.createElement("style");if(h.textContent=n?n+" {."+m+v+c+" "+d.query+"{"+d.name+":"+f+"}}":"."+m+v+c+" "+d.query+"{"+d.name+":"+f+"}",document.head.append(h),/dark/.test(n)){var g=document.createElement("style");g.textContent=".dark ."+m+v+c+" "+d.query+"{"+d.name+":"+f+"}",document.head.append(g)}}}}}({css:e,name:s,media:u,pesudo:l,group:d})})})),e},o={},n=function(n,e,t){var r="^group_"+n+"_"+e+"_"+t;o[r]||(o[r]=!0,c[n]||(c[n]={}),c[n][e]=function(e){var r=t;e.forEach(function(e,t){r=r.replace("$"+(t+1),e)});var o="";return a(r).forEach(function(e){var t=e.cssItem,a=e.group;t.split(" ").forEach(function(e){var t=y(a||n,e);if(t.comp){var r=[];e.split(":").forEach(function(e){e===t.compName?r.push(t.comp(t.value.split(","))):e===t.value||r.push(e)}),o+=r.join(":")+" "}else o+=e+" "})}),o})};function p(e){var o=e.getAttribute("flavor")||"",t="";if("TEMPLATE"===e.tagName){var r=e.content.cloneNode(!0);r&&(t=r.textContent)}else t=e.textContent;t&&(t=t.replace("\n","")).trim().split(";").forEach(function(e){var t=e.split(":"),r=t[0],a=t.slice(1);(r=r.trim())&&n(o,r,a.join(":").trim())})}function m(e){e&&f(e.className)}var t=!1,r=function(){"undefined"!=typeof window&&"undefined"!=typeof document&&window.location&&(t||(window.MutationObserver?document.body?(document.querySelectorAll("[flavor]").forEach(p),document.body.querySelectorAll("[class]").forEach(m),new MutationObserver(function(e){for(var t=0,r=e;t<r.length;t++){var a=r[t];"childList"===a.type?(p(a.target),m(a.target),a.target.querySelectorAll("[flavor]").forEach(p),a.target.querySelectorAll("[class]").forEach(m)):"attributes"===a.type&&m(a.target)}}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),t=!0):requestAnimationFrame(r):console.error("[flavorcss] Your Browser not supported MutationObserver")))};r(),e.classGroup=n,e.device=i,e.groupList={},e.mediaList=u,e.observeClass=r,e.parser=f,e.pesudoList=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
