var F={"(":1,";":1,":":1,"=":1},p=({css:e,name:n="",media:r="",mediaName:s="",pesudo:a="",value:t=""})=>{if(!n||!t)return;let i=t[t.length-1];if(F[i])return;if(i==="!"&&(t=t.replace(/(!$)/," !important")),/\~/.test(t)){let w=t.split("~").map($=>$?`"${$}"`:"").join(" ");t=" "+w,t+=";"}t=t.replace(/calc\((.*?)\)/g,c=>(c=c.replace(/(-|\+|\*|\/)/g,w=>" "+w+" "),c)),t=t.replace(/\|/g," "),t=t.replace(/var\((.*?)\)/g,c=>c.replace(/(var\(|\))/g,"")),t=t.replace(/--([a-zA-Z0-9_-]*)/g,c=>`var(${c})`),t=t.replace(/\^\^\^/g,",");let o=e.replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,c=>"\\"+c);/^(\w|\*)/.test(a)&&(a=" "+a),a=a.replace(/\|/g," ");let d=document.createElement("style");if(r?d.textContent=`${r} {.${o}${a}{${n}:${t}}}`:d.textContent=`.${o}${a}{${n}:${t}}`,d.setAttribute("flavor-css",""),document.head.append(d),s){let c=document.createElement("style");c.textContent=`.media-${s} .${o}${a}{${n}:${t}}`,c.setAttribute("flavor-css",""),document.head.append(c)}};var l={},g=e=>{!e||(e=e.replace(`
`,""),e=e.replace(/(\/\/\s)/g,"//"),e.trim().split(";").forEach(n=>{let[r,...s]=n.split(":"),a=s.join(":");r=r.trim(),r&&a.split(" ").filter(Boolean).forEach(i=>{T(r,i)})}))},E={},q=Array(10).fill(0).map((e,n)=>new RegExp(`(\\$${n+1})`,"g")),T=(e,n)=>{let r=`${e}___${n}`;E[r]||(E[r]=!0,l[e]||(l[e]=[]),l[e].push(s=>{let a=s.split(","),t=n;return a.forEach((i,o)=>{t=t.replace(q[o],i)}),t}))};var m=navigator.userAgent.toLocaleLowerCase(),C=/(?:android)/.test(m),b=/(?:firefox)/.test(m),H=/(?:chrome|crios)/.test(m),j=/(safari)/.test(m),_=/(?:ipad|playbook)/.test(m)||C&&!/(?:mobile)/.test(m)||b&&/(?:tablet)/.test(m),L=/(?:iphone)/.test(m)&&!_,A=!L&&!C,S=!A,B=S&&/(micromessenger|wechat)/.test(m),f={android:C,firefox:b,chrome:H,tablet:_,ios:L,wechat:B,desktop:A,phone:S,safari:j};var x={all:"",print:"@media print",speech:"@media speech",fine:"@media (pointer: fine)",dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"};function O(e,n){e.comp=l[n],e.compName=n}function V(e,n){x[n]?(e.media=x[n],e.mediaName=n):f[n]!==void 0&&(e.media=`@media screen and (min-width: ${f[n]?"0px":"9999px"})`,e.mediaName=n)}function D(e,n){!n||(e.comp&&(n=n.replace(/\((.*?)\)/g,r=>r.replace(/\,/g,"^^^"))),e.value=n)}function N(e,n){let r="_$$_"+e,s={css:n||e,compName:"",comp:void 0,pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!e||e[0]==="/"&&e[1]==="/")return s;let a=e.split(":");V(s,a[0]),s.mediaName&&a.shift();let t=a.length,i=a[t-1],o=t>=2?a[t-2]:"";t===1&&(o=i,i="");let d=[...a];return o?(s.name=o,O(s,o),D(s,i),d.pop(),d.pop()):(s.name=i,d.pop()),s.pesudo=d.join(":"),s.pesudoName=s.pesudo,s}var u={},h=e=>{let n="-"+e;if(u[n])return e;if(u[n]=!0,!!/:/.test(e))return e.split(" ").filter(Boolean).forEach(r=>{if(u[r])return;u[r]=!0;let s=N(r);s.comp?s.comp.forEach(a=>a(s.value).split(" ").filter(Boolean).forEach(t=>{p(N(t,r))})):p(s)}),e};var k="[class]";function I(e){let n="";if(e.tagName==="TEMPLATE"){let r=e.content.cloneNode(!0);r&&(n=r.textContent)}else n=e.textContent;g(n)}function y(e){!e||e.className&&typeof e.className=="string"&&h(e.className)}var z=()=>{let e=(r,...s)=>{let a=r.length;for(let t=0;t<a;t++){let i=r[t];if(i.type==="childList"){let o=i.target;if(o.__flavorIgnore&&o.closest("[flavor-ignore]")&&!o.getAttribute("flavor-ignore")){o.__flavorIgnore=!0;return}y(o),i.addedNodes.length&&o.querySelectorAll(k).forEach(y)}else i.type==="attributes"&&y(i.target)}};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],characterData:!1,attributeOldValue:!1,characterDataOldValue:!1})};window.addEventListener("load",()=>{document.querySelectorAll("[data-flavor]").forEach(I),document.body.querySelectorAll(k).forEach(e=>{y(e)}),z()});var M={addStyle:p,os:f,addCss:h,addComponents:g,mediaList:x};window.flavorcss=M;export{M as flavorcss};
