var q={"(":1,";":1,":":1,"=":1},p=({css:e,name:r="",media:n="",mediaName:s="",pesudo:o="",value:t=""})=>{if(!r||!t)return;let a=t[t.length-1];if(q[a])return;if(a==="!"&&(t=t.replace(/(!$)/," !important")),/\~/.test(t)){let b=t.split("~").map(_=>_?`"${_}"`:"").join(" ");t=" "+b,t+=";"}t=t.replace(/calc\((.*?)\)/g,m=>(m=m.replace(/(-|\+|\*|\/)/g,b=>" "+b+" "),m)),t=t.replace(/\|/g," "),t=t.replace(/var\((.*?)\)/g,m=>m.replace(/(var\(|\))/g,"")),t=t.replace(/--([a-zA-Z0-9_-]*)/g,m=>`var(${m})`),t=t.replace(/\^\^\^/g,",");let i=e.replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,m=>"\\"+m);/^(\w|\*)/.test(o)&&(o=" "+o),o=o.replace(/\|/g," ");let c=document.createElement("style");if(n?c.textContent=`${n} {.${i}${o}{${r}:${t}}}`:c.textContent=`.${i}${o}{${r}:${t}}`,c.setAttribute("flavor-css",""),document.head.append(c),s){let m=document.createElement("style");m.textContent=`.media-${s} .${i}${o}{${r}:${t}}`,m.setAttribute("flavor-css",""),document.head.append(m)}};var l=/(\n| )/;var f={},x=e=>{!e||(e=e.replace(`
`,""),e=e.replace(/(\/\/\s)/g,"//"),e.trim().split(";").forEach(r=>{let[n,...s]=r.split(":"),o=s.join(":");n=n.trim(),n&&o.split(l).filter(Boolean).forEach(a=>{O(n,a)})}))},A={},v=Array(10).fill(0).map((e,r)=>new RegExp(`(\\$${r+1})`,"g")),O=(e,r)=>{let n=`${e}___${r}`;A[n]||(A[n]=!0,f[e]||(f[e]=[]),f[e].push(s=>{let o=s.split(","),t=r;return o.forEach((a,i)=>{t=t.replace(v[i],a)}),t}))};var d=navigator.userAgent.toLocaleLowerCase(),N=/(?:android)/.test(d),L=/(?:firefox)/.test(d),j=/(?:chrome|crios)/.test(d),H=/(safari)/.test(d),S=/(?:ipad|playbook)/.test(d)||N&&!/(?:mobile)/.test(d)||L&&/(?:tablet)/.test(d),k=/(?:iphone)/.test(d)&&!S,M=!k&&!N,F=!M,R=F&&/(micromessenger|wechat)/.test(d),g={android:N,firefox:L,chrome:j,tablet:S,ios:k,wechat:R,desktop:M,phone:F,safari:H};var u={all:"",print:"@media print",speech:"@media speech",fine:"@media (pointer: fine)",dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"};function B(e,r){e.comp=f[r],e.compName=r}function V(e,r){u[r]?(e.media=u[r],e.mediaName=r):g[r]!==void 0&&(e.media=`@media screen and (min-width: ${g[r]?"0px":"9999px"})`,e.mediaName=r)}function D(e,r){!r||(e.comp&&(r=r.replace(/\((.*?)\)/g,n=>n.replace(/\,/g,"^^^"))),e.value=r)}function $(e,r){let n="_$$_"+e,s={css:r||e,compName:"",comp:void 0,pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!e||e[0]==="/"&&e[1]==="/")return s;let o=e.split(":");V(s,o[0]),s.mediaName&&o.shift();let t=o.length,a=o[t-1],i=t>=2?o[t-2]:"";t===1&&(i=a,a="");let c=[...o];return i?(s.name=i,B(s,i),D(s,a),c.pop(),c.pop()):(s.name=a,c.pop()),s.pesudo=c.join(":"),s.pesudoName=s.pesudo,s}var h={},y=e=>{let r="-"+e;return h[r]||(h[r]=!0,e.split(l).filter(Boolean).forEach(n=>{if(h[n])return;h[n]=!0;let s=$(n);s.comp?s.comp.forEach(o=>o(s.value).split(l).filter(Boolean).forEach(t=>{let a=$(t,n);p({...a,pesudo:a.pesudo||s.pesudo,media:a.media||s.media,mediaName:a.mediaName||s.mediaName})})):p(s)})),e};var C={ignoreObserveComponent:!1};function E(e){if(!e.hasAttribute("flavor-css"))return;let r="";if(e.tagName==="TEMPLATE"){let n=e.content.cloneNode(!0);n&&(r=n.textContent)}else r=e.textContent;x(r)}function w(e){!e||e.className&&typeof e.className=="string"&&y(e.className)}var I=()=>{let e=(n,...s)=>{let o=n.length;for(let t=0;t<o;t++){let a=n[t];if(a.type==="childList"){let i=a.target;if(i.__flavorIgnore&&i.closest("[flavor-ignore]")&&!i.getAttribute("flavor-ignore")){i.__flavorIgnore=!0;return}C.ignoreObserveComponent||E(i),w(i),a.addedNodes.length&&(C.ignoreObserveComponent||i.querySelectorAll("[flavor-css]").forEach(E),i.querySelectorAll("[class]").forEach(w))}else a.type==="attributes"&&w(a.target)}};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","flavor-css"],characterData:!1,attributeOldValue:!1,characterDataOldValue:!1})};window.addEventListener("load",()=>{document.querySelectorAll("[flavor-css]").forEach(E),document.querySelectorAll("[class]").forEach(w),I()});var T={addStyle:p,os:g,addCss:y,addComponents:x,mediaList:u,observerSetting:C};window.flavorcss=T;export{T as flavorcss};
