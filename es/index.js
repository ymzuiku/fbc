var T={"(":1,";":1,":":1,"=":1},p=({css:e,name:s="",media:n="",mediaName:r="",pesudo:a="",value:t=""})=>{if(!s||!t)return;let o=t[t.length-1];if(T[o])return;if(o==="!"&&(t=t.replace(/(!$)/," !important")),/\~/.test(t)){let C=t.split("~").map(b=>b?`"${b}"`:"").join(" ");t=" "+C,t+=";"}t=t.replace(/calc\((.*?)\)/g,c=>(c=c.replace(/(-|\+|\*|\/)/g,C=>" "+C+" "),c)),t=t.replace(/\|/g," "),t=t.replace(/var\((.*?)\)/g,c=>c.replace(/(var\(|\))/g,"")),t=t.replace(/--([a-zA-Z0-9_-]*)/g,c=>`var(${c})`),t=t.replace(/\^\^\^/g,",");let i=e.replace(/(\:|#|\*|!|,|\.|>|<|@|~|%|\||\$|\{|\}|\[|\]|\(|\)|\+|\*|\/)/g,c=>"\\"+c);/^(\w|\*)/.test(a)&&(a=" "+a),a=a.replace(/\|/g," ");let m=document.createElement("style");if(n?m.textContent=`${n} {.${i}${a}{${s}:${t}}}`:m.textContent=`.${i}${a}{${s}:${t}}`,console.log(m.textContent),m.setAttribute("flavor-css",""),document.head.append(m),r){let c=document.createElement("style");c.textContent=`.media-${r} .${i}${a}{${s}:${t}}`,c.setAttribute("flavor-css",""),document.head.append(c)}};var l=/(\n| )/;var f={},x=e=>{!e||(e=e.replace(`
`,""),e=e.replace(/(\/\/\s)/g,"//"),e.trim().split(";").forEach(s=>{let[n,...r]=s.split(":"),a=r.join(":");n=n.trim(),n&&a.split(l).filter(Boolean).forEach(o=>{q(n,o)})}))},_={},j=Array(10).fill(0).map((e,s)=>new RegExp(`(\\$${s+1})`,"g")),q=(e,s)=>{let n=`${e}___${s}`;_[n]||(_[n]=!0,f[e]||(f[e]=[]),f[e].push(r=>{let a=r.split(","),t=s;return a.forEach((o,i)=>{t=t.replace(j[i],o)}),t}))};var d=navigator.userAgent.toLocaleLowerCase(),N=/(?:android)/.test(d),A=/(?:firefox)/.test(d),H=/(?:chrome|crios)/.test(d),R=/(safari)/.test(d),L=/(?:ipad|playbook)/.test(d)||N&&!/(?:mobile)/.test(d)||A&&/(?:tablet)/.test(d),S=/(?:iphone)/.test(d)&&!L,k=!S&&!N,M=!k,B=M&&/(micromessenger|wechat)/.test(d),g={android:N,firefox:A,chrome:H,tablet:L,ios:S,wechat:B,desktop:k,phone:M,safari:R};var u={all:"",print:"@media print",speech:"@media speech",fine:"@media (pointer: fine)",dark:"@media (prefers-color-scheme: dark)",xs:"@media screen and (min-width: 480px)",sm:"@media screen and (min-width: 640px)",md:"@media screen and (min-width: 768px)",lg:"@media screen and (min-width: 1024px)",xl:"@media screen and (min-width: 1280px)",xxl:"@media screen and (min-width: 1536px)","in-xs":"@media screen (max-width:479px) and (min-width: 0px)","in-sm":"@media screen (max-width:767px) and (min-width: 479px)","in-md":"@media screen (max-width:1023px) and (min-width: 767px)","in-lg":"@media screen (max-width:1279px) and (min-width: 1023px)","in-xl":"@media screen (max-width:1535px) and (min-width: 1279px)","in-xxl":"@media screen (max-width:9999px) and (min-width: 1535px)"};function O(e,s){e.comp=f[s],e.compName=s}function V(e,s){u[s]?(e.media=u[s],e.mediaName=s):g[s]!==void 0&&(e.media=`@media screen and (min-width: ${g[s]?"0px":"9999px"})`,e.mediaName=s)}function D(e,s){!s||(e.comp&&(s=s.replace(/\((.*?)\)/g,n=>n.replace(/\,/g,"^^^"))),e.value=s)}function $(e,s){let n="_$$_"+e,r={css:s||e,compName:"",comp:void 0,pesudo:"",pesudoName:"",media:"",mediaName:"",name:"",value:"",query:""};if(!e||e[0]==="/"&&e[1]==="/")return r;let a=e.split(":");V(r,a[0]),r.mediaName&&a.shift();let t=a.length,o=a[t-1],i=t>=2?a[t-2]:"";t===1&&(i=o,o="");let m=[...a];return i?(r.name=i,O(r,i),D(r,o),m.pop(),m.pop()):(r.name=o,m.pop()),r.pesudo=m.join(":"),r.pesudoName=r.pesudo,console.log(e,r),r}var h={},y=e=>{let s="-"+e;return h[s]||(h[s]=!0,e.split(l).filter(Boolean).forEach(n=>{if(h[n])return;h[n]=!0;let r=$(n);r.comp?r.comp.forEach(a=>a(r.value).split(l).filter(Boolean).forEach(t=>{let o=$(t,n);p({...o,pesudo:o.pesudo||r.pesudo,media:o.media||r.media,mediaName:o.mediaName||r.mediaName})})):p(r)})),e};function E(e){if(!e.hasAttribute("flavor-css"))return;let s="";if(e.tagName==="TEMPLATE"){let n=e.content.cloneNode(!0);n&&(s=n.textContent)}else s=e.textContent;x(s)}function w(e){!e||e.className&&typeof e.className=="string"&&y(e.className)}var I=()=>{let e=(n,...r)=>{let a=n.length;for(let t=0;t<a;t++){let o=n[t];if(o.type==="childList"){let i=o.target;if(i.__flavorIgnore&&i.closest("[flavor-ignore]")&&!i.getAttribute("flavor-ignore")){i.__flavorIgnore=!0;return}w(i),E(i),o.addedNodes.length&&(i.querySelectorAll("[flavor-css]").forEach(E),i.querySelectorAll("[class]").forEach(w))}else o.type==="attributes"&&w(o.target)}};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],characterData:!1,attributeOldValue:!1,characterDataOldValue:!1})};window.addEventListener("load",()=>{document.querySelectorAll("[flavor-css]").forEach(E),document.querySelectorAll("[class]").forEach(w),I()});var F={addStyle:p,os:g,addCss:y,addComponents:x,mediaList:u};window.flavorcss=F;export{F as flavorcss};
